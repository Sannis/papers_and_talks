% Copyright 2010 by Oleg "Sannis" Efimov <efimovov@yandex.ru>
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the MIT License.
%

\usetheme{default}

% Lists style
\itemsep=1pt

\newcommand{\insertsupervisorprefix}{Научный руководитель}
\newcommand{\supervisorname}[1]{
    \def\beamer@temp{#1}
    \ifx \beamer@temp \@empty
        \def\insertsupervisorname{}
    \else
        \def\insertsupervisorname{#1}
    \fi
}
\supervisorname{}

\newcommand{\pretitle}[1]{
    \def\beamer@temp{#1}
    \ifx \beamer@temp \@empty
        \def\insertpretitle{}
    \else
        \def\insertpretitle{#1}
    \fi
}
\pretitle{}

\newcommand{\laboratory}[1]{
    \def\beamer@temp{#1}
    \ifx \beamer@temp \@empty
        \def\insertlaboratory{}
    \else
        \def\insertlaboratory{#1}
    \fi
}
\laboratory{}

\mode<presentation>

\setbeamercolor*{author in head/foot}{parent=palette tertiary}
\setbeamercolor*{title in head/foot}{parent=palette secondary}
\setbeamercolor*{date in head/foot}{parent=palette primary}
\setbeamercolor*{date in head/foot}{use=structure,fg=structure.fg!50!white}

\setbeamercolor*{section in head/foot}{parent=palette tertiary}
\setbeamercolor*{subsection in head/foot}{parent=palette primary}

%Table of contents color
\setbeamercolor{father}{fg=red}

\defbeamertemplate*{title page}{ofvp}
{
    \vbox{}
    \vfill
    \begin{centering}
        \vspace{-3.0em}
        \begin{beamercolorbox}[sep=8pt,center]{institute}
            \begin{columns}[t,totalwidth=\textwidth]
                \column[T]{0.1\textwidth}
                    \includegraphics[height=1.2cm]{ilc_logo_ru.png} \hfill
                \column[T]{0.8\textwidth}
                    \begin{centering}
                        \usebeamerfont{institute}
                        \vspace{0.6em}
                        \insertinstitute
                    \end{centering}
                \column[T]{0.1\textwidth}
                    \hfill \includegraphics[height=1.2cm]{physfac_logo.png}
            \end{columns}
        \end{beamercolorbox}
        \vskip1em\par
        \begin{beamercolorbox}[sep=8pt,center]{title}
            \ifx \insertpretitle \@empty
            \else
                \usebeamerfont{pretitle} \usebeamercolor[fg]{pretitle} \insertpretitle \par
                \vskip0.5em
            \fi
            \usebeamerfont{title}\inserttitle\par
            \ifx \insertsubtitle \@empty
            \else
                \vskip0.5em
                \usebeamerfont{subtitle} \usebeamercolor[fg]{subtitle} \insertsubtitle \par
            \fi
        \end{beamercolorbox}
        \vskip1em
        \begin{beamercolorbox}[sep=8pt,center]{author}
            \usebeamerfont{author}
            \insertauthor
            \ifx \insertsupervisorname \@empty
            \else
                \vskip0.5em
                \insertsupervisorprefix\ \insertsupervisorname
            \fi
        \end{beamercolorbox}
        \vskip1em
        \begin{beamercolorbox}[sep=8pt,center]{date}
            \usebeamerfont{date} \insertdate
        \end{beamercolorbox}
    \end{centering}
    \vfill
}

\defbeamertemplate*{headline}{ofvp}{}

\defbeamertemplate*{footline}{ofvp}
{
    \leavevmode
    \ifx \value{framenumber} 1
    \else
        \hbox{
            \begin{beamercolorbox}[wd=0.8\paperwidth,ht=2.25ex,dp=1ex,left]{date in head/foot}
                \usebeamerfont{date in head/foot}
                \hspace*{2ex}\insertshortauthor,
                \ifx \insertsubtitle \@empty \else \insertlaboratory, \fi
                \insertshortinstitute, \insertshortdate
            \end{beamercolorbox}
            \begin{beamercolorbox}[wd=0.2\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}
                \usebeamerfont{author in head/foot}
                \insertframenumber{} / \inserttotalframenumber
                \hspace*{2ex}
            \end{beamercolorbox}}
    \fi
    \vskip0pt
}

% Hide right sidebar
\defbeamertemplate*{sidebar right}{ofvp}{}

% Show numbers in bibliography
\setbeamertemplate{bibliography item}[text]

\setbeamersize{text margin left=1em, text margin right=1em}

\setbeamerfont{pretitle}{size=\Large}

\setbeamerfont{title}{size=\Large,series=\bfseries}

\setbeamerfont{author}{size=\footnotesize}

\setbeamerfont{date}{size=\footnotesize}

\mode<all>
